/*! three-world-v0.1.1 2014-12-20 */

!function(a){var b="undefined"!=typeof module&&module.exports?module.exports:THREE.World||(THREE.World={});a(b)}(function(a){function b(a,b,d){"undefined"==typeof d&&"function"==typeof b&&(d=b,b=null),b=b||{},b.useVR=b.useVR||!1,b.useOrbitControl=b.useOrbitControl||!1,b.width=b.width||window.innerWidth,b.height=b.height||window.innerHeigh;var f={renderer:null,events:null,scene:null,camera:null,orbitControl:null,vr:{},_animationCallbacks:{},_timedAnimationCallbacks:{}};return f.startLoop=g.bind(null,f),f.stopLoop=h.bind(null,f),f.addAnimationCallback=i.bind(null,f),f.removeAnimationCallback=j.bind(null,f),f.onResize=e.bind(null,f),f.enterFullScreen=m.bind(null,f),f.destroy=n.bind(null,f),c(f,a,b),d&&d(null,f),f}function c(a,b,c){var d=a.scene=new THREE.Scene,g=a.renderer=new THREE.WebGLRenderer({antialias:!0});b.appendChild(g.domElement);var h=a.camera=new THREE.PerspectiveCamera(75,c.width/c.height,.1,1e3);h.aspect=c.width/c.height,h.updateProjectionMatrix(),d.add(h),c.useVR?o?(a.vr={effect:new THREE.VREffect(g),control:new THREE.VRControls(h)},a.vr.effect.setSize(c.width,c.height),f(a.vr,function(){}),a.onResize()):alert("Trying to enable webVR but your browser has no support for it!"):g.setSize(c.width,c.height),a._onResize=e.bind(null,a),window.addEventListener("resize",a._onResize),c.useOrbitControl&&(a.orbitControl=new THREE.OrbitControls(h,g.domElement)),a.onResize()}function d(a){a.loop=requestAnimationFrame(d.bind(null,a));for(var b={type:"animate",defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0}},c=Object.keys(a._animationCallbacks),e=0;e<c.length&&(a._animationCallbacks[c[e]](b),!b.defaultPrevented);e++);a.vr.control?a.vr.control.update():a.orbitControl&&a.orbitControl.update(),(a.vr.effect||a.renderer).render(a.scene,a.camera)}function e(a){var b=window.innerWidth,c=window.innerHeight;a.camera.aspect=b/c,a.camera.updateProjectionMatrix(),(a.vr.effect||a.renderer).setSize(b,c)}function f(a,b){return o?void(navigator.mozGetVRDevices||navigator.getVRDevices)().then(function(c){c.forEach(function(b){b instanceof HMDVRDevice?a.hmd=b:b instanceof PositionSensorVRDevice&&(a.positionSensor=b)});var d=a.positionSensor&&a.positionSensor.getState(),e=d&&d.timeStamp>0;a.isPseudoVR=!e,b&&b(null,a)}):void b(new Error("no vr support"))}function g(a){return Object.keys(a._timedAnimationCallbacks).forEach(function(b){var c=a._timedAnimationCallbacks[b];clearInterval(c.intervalId),c.intervalId=setInterval(c.callback)}),d(a),a}function h(a){return cancelAnimationFrame(a.loop),Object.keys(a._timedAnimationCallbacks).forEach(function(b){var c=a._timedAnimationCallbacks[b];clearInterval(c.intervalId)}),a}function i(a,b,c,d){if("function"==typeof b&&(d=b,c=b=void 0),"function"==typeof c&&(d=c,c=void 0),b||(b="anonymous-callback-"+Date.now()),!c)return a._animationCallbacks[b]=d;var e=Date.now();return a._timedAnimationCallbacks[b]={intervalTime:c,intervalId:setInterval(function(){var a=Date.now(),b=a-e;e=a,d(b)},c),callback:d}}function j(a,b){if(a._animationCallbacks[b])delete a._animationCallbacks[b];else{var c=a._timedAnimationCallbacks[b];c&&(clearInterval(c.intervalId),delete a._timedAnimationCallbacks[b])}}function k(a){Object.keys(a._animationCallbacks).forEach(function(b){j(a,b)}),Object.keys(a._timedAnimationCallbacks).forEach(function(b){j(a,b)})}function l(a){var b=[a.geometry,a.material,a.material&&a.material.map].filter(function(a){a&&a.dispose});return(a.children||[]).reduce(function(a,b){return a.concat(l(b))},b)}function m(a){a.vr&&a.vr.effect?a.vr.effect.setFullScreen(!0):a.renderer.domElement[a.renderer.domElement.mozRequestFullScreen?"mozRequestFullScreen":"webkitRequestFullScreen"]()}function n(a,b){a._onResize&&(window.removeEventListener("resize",a._onResize),delete a._onResize),cancelAnimationFrame(a.loop),k(a),l(a.scene).forEach(function(a){a.dispose()});var c=a.renderer;c.domElement.parentNode&&c.domElement.parentNode.removeChild(c.domElement),b&&b()}a.create=b;var o=!!navigator.mozGetVRDevices||!!navigator.getVRDevices});
//# sourceMappingURL=three-world.min-bundle.js.map